(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{224:function(e,t,n){},225:function(e,t,n){},312:function(e,t,n){},322:function(e,t,n){"use strict";n.r(t);var r,a,c,s=n(0),o=n(41),i=n.n(o),u=n(24),l=(n(224),n(225),n(86)),j=n(40),d=n(1),b=n(7),p=n(330),O=n(328),m=n(204),f=n(44),v="AUTH/SIGN_IN",h="AUTH/LOG_OUT",x=n(13),y=n.n(x),k=n(27),g=n(21),I=n(23),S=n(32),T=n.n(S),w="http://localhost:7000/auth",C=function(){function e(){Object(g.a)(this,e)}return Object(I.a)(e,null,[{key:"sigIn",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.login,r=t.password,e.next=3,T.a.post("".concat(w,"/login"),{login:n,password:r});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"signUp",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("".concat(w,"/registration"),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),E=n(111),A=n(196),N=n(193),P=JSON.parse((null===(r=localStorage)||void 0===r?void 0:r.getItem("userActive"))||"{}"),D=function(e){T.a.defaults.headers.common={Authorization:"Bearer ".concat(e)}};D(null===P||void 0===P?void 0:P.token),T.a.interceptors.request.use((function(e){return e}),(function(e){return e})),T.a.interceptors.response.use((function(e){return e}),(function(e){return e})),(null===(a=localStorage)||void 0===a?void 0:a.userActive)||localStorage.setItem("userActive","{}");var F={userActive:JSON.parse(null===(c=localStorage)||void 0===c?void 0:c.userActive)||""},B=n(9),_=n(6),R="PROJECTS/SET_PROJECT_BY_AUHTOR",J="PROJECTS/SET_PROJECT",K="PROJECTS/SET_STATUSES",U="PROJECTS/SET_USERS",M="PROJECTS/UNSET_USERS",z="PROJECTS/ADD_CRAETED_PROJECT",q="PROJECTS/DELETE_PROJECT",L="PROJECTS/SET_COMMENTS",V="PROJECTS/SET_COMMENT",G={projects:[],projectsDetail:[],statuses:[],projectComments:[]},Y="TASK/SET_TASK_BY_PROJECT",H="TASK/SET_TASK",W="TASK/ADD_CRAETED_TASK",Q="TASK/SET_UPDATED_TASK",X="TASK/DELETE_TASK",Z="TASKK/SET_STATUSES",$="TASK/SET_TYPES",ee="TASK/SET_PRIORITIES",te="TASK/SET_COMMENTS",ne="TASK/SET_COMMENT",re={tasks:[],tasksByProject:[],tasksDetail:{},statuses:[],types:[],priorities:[],taskComments:[]},ae="USER/GET_USERS",ce={users:[],userActive:JSON.parse(localStorage.getItem("userActive")||"{}")},se=n(210),oe=n(207),ie=Object(E.combineReducers)({auth:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v:return localStorage.userActive=JSON.stringify(n.payload),D(null===(e=n.payload)||void 0===e?void 0:e.token),Object(d.a)(Object(d.a)({},t),{},{userActive:n.payload,token:n.payload.token});case h:return localStorage.token="",localStorage.userActive="{}",Object(d.a)(Object(d.a)({},t),{},{token:"",userActive:"{}"});default:return t}},project:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case R:return Object(d.a)(Object(d.a)({},r),{},{projects:a.payload});case J:return Object(d.a)(Object(d.a)({},r),{},{projectsDetail:Object(d.a)(Object(d.a)({},r.projectsDetail),{},Object(_.a)({},a.payload.id,a.payload))});case z:return Object(d.a)(Object(d.a)({},r),{},{projects:[].concat(Object(B.a)(r.projects),[a.payload])});case q:return Object(d.a)(Object(d.a)({},r),{},{projects:r.projects.filter((function(e){return e.id!==a.payload}))});case U:var c=a.payload,s=c.projectId,o=c.users,i=r.projectsDetail[s],u=Object(d.a)(Object(d.a)({},i),{},{team:[].concat(Object(B.a)((null===i||void 0===i?void 0:i.team)||[]),Object(B.a)(o||[]))});return Object(d.a)(Object(d.a)({},r),{},{projectsDetail:Object(d.a)(Object(d.a)({},r.projectsDetail),{},Object(_.a)({},s,u))});case M:var l=a.payload,j=(null===(e=l.users)||void 0===e||null===(t=e.map((function(e){return null===e||void 0===e?void 0:e.id})))||void 0===t?void 0:t.filter(Boolean))||[],b=r.projectsDetail[l.projectId],p=Object(d.a)(Object(d.a)({},b),{},{team:null===b||void 0===b?void 0:b.team.filter((function(e){var t=e.id;return!j.includes(t)}))});return Object(d.a)(Object(d.a)({},r),{},{projectsDetail:Object(d.a)(Object(d.a)({},r.projectsDetail),{},Object(_.a)({},l.projectId,p))});case K:return Object(d.a)(Object(d.a)({},r),{},{statuses:a.payload});case L:if(!(null===a||void 0===a||null===(n=a.payload)||void 0===n?void 0:n.length))return r;var O=a.payload[0];return Object(d.a)(Object(d.a)({},r),{},{projectComments:Object(d.a)(Object(d.a)({},r.projectComments),{},Object(_.a)({},O.projectId,a.payload))});case V:if(!(null===a||void 0===a?void 0:a.payload))return r;var m=a.payload,f=[].concat(Object(B.a)(r.projectComments[m.projectId]),[m])||[];return Object(d.a)(Object(d.a)({},r),{},{projectComments:Object(d.a)(Object(d.a)({},r.projectComments),{},Object(_.a)({},m.projectId,f))});default:return r}},task:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Y:if(!(null===a||void 0===a||null===(e=a.payload)||void 0===e?void 0:e.length))return r;var c=a.payload[0];return Object(d.a)(Object(d.a)({},r),{},{tasksByProject:Object(d.a)(Object(d.a)({},r.tasksByProject),{},Object(_.a)({},c.projectId,a.payload))});case H:return Object(d.a)(Object(d.a)({},r),{},{tasksDetail:Object(d.a)(Object(d.a)({},r.tasksDetail),{},Object(_.a)({},null===(t=a.payload)||void 0===t?void 0:t.id.toString(),null===a||void 0===a?void 0:a.payload))});case W:var s=r.tasksByProject[a.payload.projectId];return Object(d.a)(Object(d.a)({},r),{},{tasksByProject:Object(d.a)(Object(d.a)({},r.tasksByProject),{},Object(_.a)({},a.payload.projectId,[].concat(Object(B.a)(s),[a.payload])))});case Q:var o=a.payload,i=r.tasksByProject[o.projectId]||[];return Object(d.a)(Object(d.a)({},r),{},{tasksByProject:Object(d.a)(Object(d.a)({},r.tasksByProject),{},Object(_.a)({},o.projectId,[o].concat(Object(B.a)(null===i||void 0===i?void 0:i.filter((function(e){var t=e.id;return+o.id!==+t}))))))});case X:var u=a.payload,l=u.id,j=u.projectId,b=r.tasksByProject[j]||[];return Object(d.a)(Object(d.a)({},r),{},{tasksByProject:Object(d.a)(Object(d.a)({},r.tasksByProject),{},Object(_.a)({},j,null===b||void 0===b?void 0:b.filter((function(e){return e.id!==l}))))});case Z:return Object(d.a)(Object(d.a)({},r),{},{statuses:a.payload});case $:return Object(d.a)(Object(d.a)({},r),{},{types:a.payload});case ee:return Object(d.a)(Object(d.a)({},r),{},{priorities:a.payload});case te:if(!(null===a||void 0===a||null===(n=a.payload)||void 0===n?void 0:n.length))return r;var p=a.payload[0];return Object(d.a)(Object(d.a)({},r),{},{taskComments:Object(d.a)(Object(d.a)({},r.taskComments),{},Object(_.a)({},p.taskId,a.payload))});case ne:if(!(null===a||void 0===a?void 0:a.payload))return r;var O=a.payload,m=[].concat(Object(B.a)(r.taskComments[O.taskId]||[]),[O])||[];return Object(d.a)(Object(d.a)({},r),{},{taskComments:Object(d.a)(Object(d.a)({},r.taskComments),{},Object(_.a)({},O.taskId,m))});default:return r}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;return t.type===ae?Object(d.a)(Object(d.a)({},e),{},{users:t.payload}):e}});se.a.config({duration:1.3});var ue=function(e,t,n,r){return function(){var a=Object(k.a)(y.a.mark((function a(c){var s,o,i;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(t);case 2:if(s=a.sent,o=s.data,i=s.response,!(null===o||void 0===o?void 0:o.result)){a.next=6;break}return a.abrupt("return",c({type:n,payload:r||o.result}));case 6:if(oe.b.error(i.data.message),401!==(null===i||void 0===i?void 0:i.status)){a.next=9;break}return a.abrupt("return",c({type:h}));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()};var le=n(5),je=function(){var e=Object(u.b)(),t=Object(s.useState)({login:"",password:""}),n=Object(b.a)(t,2),r=n[0],a=n[1];return Object(le.jsx)("div",{className:"authorization-page",children:Object(le.jsx)(p.a,{title:"Authorization",visible:!0,footer:null,closable:!1,children:Object(le.jsxs)(O.a,{initialValues:{remember:!0},autoComplete:"off",children:[Object(le.jsx)(O.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(le.jsx)(m.a,{value:r.login,onChange:function(e){var t=e.target;a(Object(d.a)(Object(d.a)({},r),{},{login:t.value}))}})}),Object(le.jsx)(O.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(le.jsx)(m.a.Password,{onChange:function(e){var t=e.target;a(Object(d.a)(Object(d.a)({},r),{},{password:t.value}))}})}),Object(le.jsx)(O.a.Item,{wrapperCol:{offset:20},children:Object(le.jsx)(f.a,{type:"primary",onClick:function(){var t;e((t=r,ue(C.sigIn,t,v)))},children:"Submit"})})]})})})},de=n(106),be=n(65),pe=n(335),Oe=n(211),me=n(327),fe=n(324),ve=n(213),he="http://localhost:7000/project",xe=function(){function e(){Object(g.a)(this,e)}return Object(I.a)(e,null,[{key:"getAllByAuthorId",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(he,"/author/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOneById",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(he,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("".concat(he),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.patch("".concat(he,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.delete("".concat(he,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStatuses",value:function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(he,"/statuses/all"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addUsersToProject",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.userIds,e.next=3,T.a.patch("".concat(he,"/").concat(n,"/users"),{userIds:r});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteUsersFromProject",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n,r,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectId,r=t.userIds,e.next=3,T.a.delete("".concat(he,"/").concat(n,"/users"),{data:{userIds:r}});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(he,"/").concat(t,"/comment/all"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createComment",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.patch("".concat(he,"/comment/add"),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ye=function(e){return se.a.success({message:"Project was created"}),ue(xe.create,e,z)},ke=function(e){return se.a.success({message:"Project was updated"}),ue(xe.update,e,J)},ge=function(){return ue(xe.getStatuses,"",K)},Ie=function(e){return ue(xe.addUsersToProject,e,U)},Se=function(e){return ue(xe.deleteUsersFromProject,e,M)},Te=function(e){return ue(xe.createComment,e,V)},we=(n(312),function(e){var t=e.project,n=Object(u.b)();return Object(le.jsxs)(me.a,{className:"project-card",hoverable:!0,title:t.title,extra:[Object(le.jsx)(l.b,{to:"project/".concat(t.id),children:"Detail"})],style:{minWidth:"300px"},children:[Object(le.jsx)("div",{className:"project-card__description",children:t.description}),Object(le.jsx)("div",{className:"project-card__actions",children:Object(le.jsx)(fe.a,{title:"Do you wanna delete this project ?",onConfirm:function(){return n((e=t.id,se.a.success({message:"Project was delted"}),ue(xe.delete,e,q)));var e},okText:"Yes",cancelText:"No",children:Object(le.jsx)(f.a,{type:"primary",size:"small",icon:Object(le.jsx)(ve.a,{},"edit"),children:"Delete"})})})]})}),Ce=n(117),Ee="http://localhost:7000/tasks",Ae=function(){function e(){Object(g.a)(this,e)}return Object(I.a)(e,null,[{key:"getAllTasksByProjectId",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ee,"/project/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"findOneById",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ee,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("".concat(Ee),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.patch("".concat(Ee,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.delete("".concat(Ee,"/").concat(t.id));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStatuses",value:function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ee,"/statuses/all"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getTypes",value:function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ee,"/types/all"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getPriorities",value:function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ee,"/priorities/all"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ee,"/").concat(t,"/comment/all"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createComment",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.patch("".concat(Ee,"/comment/add"),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ne=function(e){return se.a.success({message:"Task was created"}),ue(Ae.create,e,W)},Pe=function(e){return se.a.success({message:"Task was updated"}),ue(Ae.update,e,Q)},De=function(){return ue(Ae.getStatuses,"",Z)},Fe=function(){return ue(Ae.getTypes,"",$)},Be=function(){return ue(Ae.getPriorities,"",ee)},_e=function(e){return ue(Ae.createComment,e,ne)},Re=function(e){var t=e.name,n=e.value,r=e.label,a=e.domainName,c=e.entityName,s=e.selectorName,o=e.onSelect,i=Object(u.b)(),l=n||{id:"",name:"",value:""},j=Object(u.c)((function(e){return e[a][s]||[]})),d=j.length?j:[l],b={project:{status:ge},task:{status:De,type:Fe,priority:Be}},p=function(e){o(Number(e))};return p(Number(null===l||void 0===l?void 0:l.id)),Object(le.jsx)(le.Fragment,{children:Object(le.jsx)(O.a.Item,{name:t,label:r,rules:[{required:!0,message:"Please select ".concat(a," ").concat(c)}],children:Object(le.jsx)(Ce.a,{onFocus:function(){return!(null===j||void 0===j?void 0:j.length)&&i(b[a][c]())},onChange:p,children:d.map((function(e){return Object(le.jsx)(Ce.a.Option,{value:e.id,children:e.name},"".concat(e.id,"-").concat(e.name))}))})})})},Je=m.a.TextArea,Ke=function(e){var t=e.project,n=e.sendFormData,r=Object(u.b)(),a=Object(u.c)((function(e){return e.auth.userActive})),c=(null===t||void 0===t?void 0:t.authorId)||a.id,o={title:(null===t||void 0===t?void 0:t.title)||"",description:(null===t||void 0===t?void 0:t.description)||"",statusId:(null===t||void 0===t?void 0:t.statusId)||999,authorId:(null===t||void 0===t?void 0:t.authorId)||999},i=Boolean(null===t||void 0===t?void 0:t.id),l=O.a.useForm(),j=Object(b.a)(l,1)[0];Object(u.c)((function(e){return e.project.statuses}));j.setFieldsValue({status:null===t||void 0===t?void 0:t.status});return Object(s.useEffect)((function(){j.setFieldsValue(o)})),Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)(O.a,{form:j,layout:"horizontal",onFinish:function(e){var a=Object(d.a)(Object(d.a)({authorId:c},t),e);r((i?ke:ye)(a)),n()},children:[Object(le.jsx)(O.a.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please input project title"},{min:10,message:"Min length 5"}],children:Object(le.jsx)(m.a,{})}),Object(le.jsx)(O.a.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input project title"},{min:10,message:"Min length 10"}],children:Object(le.jsx)(Je,{})}),Object(le.jsx)(Re,{value:(null===t||void 0===t?void 0:t.status)||null,name:"statusId",label:"Status",domainName:"project",entityName:"status",selectorName:"statuses",onSelect:function(e){e&&j.setFieldsValue({statusId:e})}}),Object(le.jsx)(O.a.Item,{children:Object(le.jsx)(de.a,{children:Object(le.jsx)(be.a,{span:24,style:{textAlign:"right"},children:Object(le.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Submit"})})})})]})})},Ue=function(){var e=Object(u.c)((function(e){return e.auth.userActive.id})),t=Object(u.b)(),n=Object(s.useState)(!1),r=Object(b.a)(n,2),a=r[0],c=r[1],o=function(){c(!1)};Object(s.useEffect)((function(){var n;t((n=e,ue(xe.getAllByAuthorId,n,R)))}),[]);var i=Object(u.c)((function(e){return e.project.projects}));return Object(le.jsxs)("div",{className:"home-page",style:{padding:"12px"},children:[Object(le.jsx)("div",{style:{padding:"12px"},children:Object(le.jsxs)(de.a,{justify:"space-between",align:"middle",children:[Object(le.jsx)(be.a,{children:Object(le.jsx)("div",{children:"Home page"})}),Object(le.jsx)(be.a,{children:Object(le.jsx)(f.a,{type:"primary",size:"small",onClick:function(){c(!0)},icon:Object(le.jsx)(Oe.a,{}),children:"Create project"})})]})}),Object(le.jsx)(pe.b,{align:"center",wrap:!0,size:[8,16],children:i.map((function(e){return Object(le.jsx)(we,{project:e},e.id)}))}),Object(le.jsx)(p.a,{title:"Projetc form",visible:a,onOk:function(){c(!1)},onCancel:o,footer:null,children:Object(le.jsx)(Ke,{project:null,sendFormData:o})})]})},Me=function(e){var t=e.children;return Object(le.jsx)("div",{className:"auth-layout",children:t})},ze=n(329),qe=function(){var e=Object(u.b)(),t=function(){e({type:h})};return Object(le.jsx)("div",{className:"header-layout",children:Object(le.jsx)(ze.a,{ghost:!1,title:Object(le.jsx)(f.a,{type:"primary",children:Object(le.jsx)(l.b,{to:"/",color:"red",children:Object(le.jsx)("b",{children:" My task manager "})})}),extra:[Object(le.jsx)(f.a,{type:"primary",danger:!0,onClick:function(){return t()},children:"Logout"},"1")],style:{backgroundColor:"var(--antd-wave-shadow-color)"}})})},Le=function(e){var t=e.children;return Object(le.jsxs)("div",{className:"base-layout",children:[Object(le.jsx)(qe,{}),t]})},Ve=n(331),Ge=n(336),Ye=n(326),He=m.a.TextArea,We=function(e){var t=e.task,n=e.projectId,r=e.users,a=e.sendFormData,c=Object(u.b)(),o=Object(u.c)((function(e){return e.auth.userActive})),i=(null===t||void 0===t?void 0:t.authorId)||o.id,l=t,j=Boolean(null===t||void 0===t?void 0:t.id),p=O.a.useForm(),v=Object(b.a)(p,1)[0];return Object(s.useEffect)((function(){v.setFieldsValue(Object(d.a)(Object(d.a)({},l),t))}),[t]),Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)(O.a,{form:v,layout:"horizontal",onFinish:function(e){var r=e.status,s=e.type,o=e.priority,u=Object(d.a)(Object(d.a)({projectId:n,authorId:i,statusId:r,typeId:s,priorityId:o},t),e);c((j?Pe:Ne)(u)),a()},children:[Object(le.jsx)(O.a.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please input task title"},{min:10,message:"Min length 5"}],children:Object(le.jsx)(m.a,{})}),Object(le.jsx)(O.a.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please input task title"},{min:10,message:"Min length 10"}],children:Object(le.jsx)(He,{})}),Object(le.jsx)(Re,{label:"Status",name:"statusId",domainName:"task",entityName:"status",selectorName:"statuses",value:(null===t||void 0===t?void 0:t.status)||null,onSelect:function(e){e&&v.setFieldsValue({priorityId:e})}}),Object(le.jsx)(Re,{label:"Priority",name:"priorityId",domainName:"task",entityName:"priority",selectorName:"priorities",value:(null===t||void 0===t?void 0:t.priority)||null,onSelect:function(e){e&&v.setFieldsValue({priorityId:e})}}),Object(le.jsx)(Re,{label:"Type",name:"typeId",domainName:"task",entityName:"type",selectorName:"types",value:(null===t||void 0===t?void 0:t.type)||null,onSelect:function(e){e&&v.setFieldsValue({typeId:e})}}),Object(le.jsx)(O.a.Item,{name:"executorId",label:"executor",rules:[{required:!0,message:"Please select user"}],children:Object(le.jsx)(Ce.a,{children:r&&(null===r||void 0===r?void 0:r.map((function(e){return Object(le.jsx)(Ce.a.Option,{value:e.id,children:e.name},"".concat(e.id,"-").concat(e.name))})))})}),Object(le.jsx)(O.a.Item,{children:Object(le.jsx)(de.a,{children:Object(le.jsx)(be.a,{span:24,style:{textAlign:"right"},children:Object(le.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Submit"})})})})]})})},Qe=n(334),Xe=function(e){var t=e.authorId,n=e.projectId,r=e.taskId,a=e.methodSubmitComment,c=Object(u.b)(),s=O.a.useForm(),o=Object(b.a)(s,1)[0],i=m.a.TextArea;return Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)(O.a,{form:o,layout:"vertical",onFinish:function(){if(!n&&!r)return oe.b.error("Sytem not exist projectId or taskId !");c(a({authorId:t||0,projectId:n||0,taskId:r||0,body:o.getFieldValue("body")})),o.resetFields()},children:[Object(le.jsx)(O.a.Item,{name:"body",label:"Comment",rules:[{required:!0,message:"If wou want add comment input some text"},{min:3,message:"Min length 3"}],children:Object(le.jsx)(i,{})}),Object(le.jsx)(O.a.Item,{children:Object(le.jsx)(de.a,{children:Object(le.jsx)(be.a,{span:24,style:{textAlign:"right"},children:Object(le.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Submit"})})})})]})})},Ze=n(325),$e=function(e){var t=e.comment;return Object(le.jsx)(le.Fragment,{children:Object(le.jsx)(Ze.a,{content:t.body,author:t.author.name,datetime:new Date(t.createdAt).toLocaleDateString()})})},et=n(333),tt=function(e){var t=e.option,n={1:"success",2:"error",3:"default",4:"processing"}[null===t||void 0===t?void 0:t.id]||"default";return Object(le.jsx)(et.a,{status:"".concat(n),text:(null===t||void 0===t?void 0:t.name)||""})},nt=Ve.a.Panel,rt=function(e){var t=e.task,n=Object(u.b)(),r=Object(u.c)((function(e){return e.user.userActive.id})),a=Object(u.c)((function(e){return e.task.taskComments[Number((null===t||void 0===t?void 0:t.id)||NaN)]||[]})),c=function(e){var r;e&&!a.length&&n((r=Number(t.id||NaN),ue(Ae.getComments,r,te)))};return Object(s.useEffect)((function(){}),[t]),Object(le.jsxs)(me.a,{className:"task-detail",title:Object(le.jsxs)(Qe.b,{children:[Object(le.jsxs)(Qe.b.Item,{label:"Title",children:[" ",t.title]}),Object(le.jsxs)(Qe.b.Item,{label:"Created",children:[" ",new Date(t.createdAt).toLocaleDateString()]})]}),hoverable:!0,children:[Object(le.jsxs)("div",{className:"task-detail__body",children:[Object(le.jsx)(Qe.b,{children:Object(le.jsxs)(Qe.b.Item,{label:"Description",children:[" ",t.description]})}),Object(le.jsxs)(Qe.b,{children:[Object(le.jsx)(Qe.b.Item,{label:"Status",children:Object(le.jsx)(tt,{option:t.status})}),Object(le.jsx)(Qe.b.Item,{label:"Type",children:Object(le.jsx)(tt,{option:t.type})}),Object(le.jsx)(Qe.b.Item,{label:"Priority",children:Object(le.jsx)(tt,{option:t.priority})})]}),Object(le.jsxs)(Qe.b,{children:[Object(le.jsxs)(Qe.b.Item,{label:"Author",children:[" ",t.author.name]}),Object(le.jsxs)(Qe.b.Item,{label:"Executor",children:[" ",t.executor.name]})]})]}),Object(le.jsx)(Ve.a,{accordion:!0,onChange:function(e){return c(e)},children:Object(le.jsxs)(nt,{header:"Comments",children:[Object(le.jsx)(Xe,{methodSubmitComment:_e,authorId:r,projectId:null,taskId:Number(t.id)}),Object(le.jsx)("div",{style:{maxHeight:"250px",overflowY:"auto"},children:null===a||void 0===a?void 0:a.map((function(e){return Object(le.jsx)("div",{children:Object(le.jsx)($e,{comment:e},"comment-key-".concat(e.id))})}))})]},"task-".concat(t.id,"-comment-block"))})]})},at=function(e){var t,n=e.tasks,r=e.users,a=Object(u.b)(),c=Object(s.useState)(!1),o=Object(b.a)(c,2),i=o[0],l=o[1],j=Object(s.useState)(!1),d=Object(b.a)(j,2),O=(d[0],d[1],Object(s.useState)(null)),m=Object(b.a)(O,2),v=m[0],h=m[1],x=Object(s.useState)(NaN),y=Object(b.a)(x,2),k=y[0],g=y[1],I=Object(u.c)((function(e){return e.task.tasksDetail})),S=function(e){a(function(e){return se.a.success({message:"Task was deleted"}),ue(Ae.delete,e,X,e)}(e))},T=function(e){var t;I[e]||a((t=e,ue(Ae.findOneById,t,H))),g(e)},w=[{title:"ID",dataIndex:"id",key:"id",render:function(e){return Object(le.jsx)(f.a,{type:"link",onClick:function(){return T(e)},children:e})}},{title:"Title",dataIndex:"title",key:"title",render:function(e,t){return Object(le.jsx)(f.a,{type:"link",onClick:function(){return T(t.id)},children:e})}},{title:"Description",dataIndex:"description",key:"description"},{title:"Type",dataIndex:"type",key:"type",render:function(e){return Object(le.jsx)(tt,{option:e})}},{title:"Status",dataIndex:"status",key:"status",render:function(e){return Object(le.jsx)(tt,{option:e})}},{title:"Priority",dataIndex:"priority",key:"Priority",render:function(e){return Object(le.jsx)(tt,{option:e})}},{title:"Actions",dataIndex:"priority",key:"Priority",render:function(e,t){return Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)(pe.b,{size:"small",children:[Object(le.jsx)(f.a,{type:"primary",size:"small",onClick:function(){return function(e){var t=n.find((function(t){return t.id===e}))||null;h(t),l(!0)}(t.id)},icon:Object(le.jsx)(Ge.a,{},"edit"),children:"Edit"}),Object(le.jsx)(fe.a,{title:"Do you wanna delete this task ?",onConfirm:function(){return S(t)},okText:"Yes",cancelText:"No",children:Object(le.jsx)(f.a,{type:"primary",size:"small",icon:Object(le.jsx)(ve.a,{},"edit"),children:"Delete"})})]})})}}];return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(p.a,{title:"Task form",visible:Boolean(null===v||void 0===v?void 0:v.id)&&i,onOk:function(){return l(!1)},onCancel:function(){return l(!1)},footer:null,children:Object(le.jsx)(We,{users:r,projectId:(null===v||void 0===v?void 0:v.projectId)||null,task:v,sendFormData:function(){return l(!1)}})}),Object(le.jsx)(p.a,{title:"Detail task",width:"auto",visible:Boolean(k)&&Boolean(null===(t=I[k])||void 0===t?void 0:t.id),onOk:function(){return g(NaN)},onCancel:function(){return g(NaN)},footer:null,children:Object(le.jsx)(rt,{task:I[k]})}),Object(le.jsx)(Ye.a,{dataSource:n,columns:w,bordered:!0})]})},ct=n(332),st=function(){function e(){Object(g.a)(this,e)}return Object(I.a)(e,null,[{key:"getAll",value:function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat("http://localhost:7000/users"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ot=function(e){var t,n=e.projectId,r=e.authorId,a=e.users,c=Object(u.b)(),o=function(e){var t=e.id,n=e.name;return{key:t.toString(),title:n}},i=null===(t=Object(u.c)((function(e){return e.user.users})).map(o))||void 0===t?void 0:t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{disabled:Number(e.key)===r})})),l=a.map(o),j=Object(s.useState)(!1),O=Object(b.a)(j,2),m=O[0],v=O[1],h=Object(s.useState)(l.map((function(e){return e.key}))),x=Object(b.a)(h,2),y=x[0],k=x[1],g=Object(s.useState)([]),I=Object(b.a)(g,2),S=I[0],T=I[1];Object(s.useEffect)((function(){m&&c(ue(st.getAll,"",ae))}),[m]);return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(de.a,{children:[Object(le.jsx)(p.a,{title:"Edit team",visible:m,onOk:function(){return v(!1)},onCancel:function(){return v(!1)},footer:null,children:Object(le.jsx)(ct.a,{dataSource:i,titles:["Source","Target"],targetKeys:y,selectedKeys:S,onChange:function(e,t,r){k(e),c({left:Se,right:Ie}[t]({projectId:n,userIds:r}))},onSelectChange:function(e,t){T([].concat(Object(B.a)(e),Object(B.a)(t)))},render:function(e){return"".concat(null===e||void 0===e?void 0:e.key,"-").concat(null===e||void 0===e?void 0:e.title)||""},oneWay:!0,style:{marginBottom:16}})}),Object(le.jsx)(pe.b,{style:{marginBottom:16},children:Object(le.jsx)(f.a,{onClick:function(){v(!0)},children:"Edit"})})]}),Object(le.jsx)(Ye.a,{dataSource:a,columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"Login",dataIndex:"login",key:"login"},{title:"Name",dataIndex:"name",key:"name"}],bordered:!0})]})},it=Ve.a.Panel,ut=function(){var e=Object(j.g)().id,t=Object(u.b)(),n=Object(u.c)((function(e){return e.user.userActive.id})),r=Object(s.useState)(!1),a=Object(b.a)(r,2),c=a[0],o=a[1],i=Object(s.useState)(!1),l=Object(b.a)(i,2),d=l[0],O=l[1];Object(s.useEffect)((function(){var n;t((n=Number(e),ue(xe.findOneById,n,J))),t(function(e){return ue(Ae.getAllTasksByProjectId,e,Y)}(Number(e)))}),[]);var m=Object(u.c)((function(t){return t.project.projectsDetail[Number(e)]||""})),v=Object(u.c)((function(t){return t.project.projectComments[Number(e)]||[]})),h=Object(u.c)((function(t){return t.task.tasksByProject[Number(e)]||""})),x=function(n){var r;n&&!v.length&&t((r=Number(e),ue(xe.getComments,r,L)))},y=m.title,k=void 0===y?"":y,g=m.description,I=void 0===g?"":g;m.status;return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(de.a,{justify:"space-around",align:"middle",style:{padding:"12px 0px"},children:[Object(le.jsx)(be.a,{span:4,children:Object(le.jsx)("b",{children:k})}),Object(le.jsx)(be.a,{span:4,children:I}),Object(le.jsx)(be.a,{span:4,children:Object(le.jsx)(tt,{option:m.status})}),Object(le.jsx)(be.a,{span:4,children:Object(le.jsxs)(pe.b,{size:"small",children:[Object(le.jsx)(f.a,{type:"primary",size:"small",onClick:function(){return o(!0)},icon:Object(le.jsx)(Ge.a,{},"edit"),children:"Edit"}),Object(le.jsx)(f.a,{type:"primary",size:"small",icon:Object(le.jsx)(Oe.a,{}),onClick:function(){return O(!0)},children:"Task"})]})})]}),Object(le.jsx)(Ve.a,{accordion:!0,children:Object(le.jsx)(it,{header:"Team",children:Object(le.jsx)(ot,{projectId:m.id,authorId:m.authorId,users:m.team})},"1")}),Object(le.jsxs)(de.a,{children:[Object(le.jsx)(p.a,{title:"Projetc form",visible:c,onOk:function(){return o(!1)},onCancel:function(){return o(!1)},footer:null,children:Object(le.jsx)(Ke,{project:m,sendFormData:function(){return o(!1)}})}),Object(le.jsx)(p.a,{title:"Task form",visible:d,onOk:function(){return O(!1)},onCancel:function(){return O(!1)},footer:null,children:Object(le.jsx)(We,{projectId:m.id,task:null,sendFormData:function(){return O(!1)},users:m.team})})]}),Object(le.jsx)(Ve.a,{accordion:!0,onChange:function(e){return x(e)},children:Object(le.jsxs)(it,{header:"Comments",children:[Object(le.jsx)(Xe,{methodSubmitComment:Te,authorId:n,projectId:Number(e),taskId:null}),Object(le.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto"},children:null===v||void 0===v?void 0:v.map((function(e){return Object(le.jsx)("div",{children:Object(le.jsx)($e,{comment:e},"comment-key-".concat(e.id))})}))}),"       "]},"2")}),Object(le.jsx)(at,{users:m.team,tasks:h})]})},lt=[{path:"/",isGuard:!0,component:Object(le.jsx)(Le,{children:Object(le.jsx)(Ue,{})})},{path:"/project/:id",isGuard:!0,component:Object(le.jsx)(Le,{children:Object(le.jsx)(ut,{})})},{path:"/auth",isGuard:!1,component:Object(le.jsx)(Me,{children:Object(le.jsx)(je,{})})}],jt=function(e){return lt.filter((function(t){var n=t.isGuard;return(void 0!==n&&n)===e}))},dt=function(e){return e?"/":"/auth"},bt=(n(321),function(){var e=Object(u.c)((function(e){return e.auth.userActive})),t=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(u.c)((function(e){var t;return Boolean(null===(t=e.auth.userActive)||void 0===t?void 0:t.token)})),n=jt(t);return Object(le.jsx)(l.a,{children:Object(le.jsxs)(j.d,{children:[n.map((function(e){return Object(le.jsx)(j.b,{exact:!0,path:e.path,children:e.component},e.path)})),Object(le.jsx)(j.a,{to:{pathname:dt(e)},exact:!0})]})})}(Boolean(null===e||void 0===e?void 0:e.token));return Object(le.jsx)("div",{className:"App",children:t})}),pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,337)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Ot=function(){var e=[A.a],t=E.applyMiddleware.apply(void 0,e);return Object(E.createStore)(ie,Object(N.composeWithDevTools)(t))}();i.a.render(Object(le.jsxs)(u.a,{store:Ot,children:[" ",Object(le.jsx)(bt,{})]}),document.getElementById("root")),pt()}},[[322,1,2]]]);
//# sourceMappingURL=main.73cf7d90.chunk.js.map